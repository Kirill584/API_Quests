# API_Quests
В проекте есть две папки:
- api.vk.ru - собственно с API методами;
- v.ru - простенький frontend для демонстрации возможностей API;

Также есть sql-файл, для возможности быстро создать БД с тестовыми данными.

Папка api.vk.ru состоит из четырех файлов:
* .htaccess - файл для описания дополнительных параметров Apache веб-сервера, у меня перенаправляет все запросы на index.php и создает параметр q, который используется для обработки GET-запросов;
* connect.php - подключение к локальной БД, в ней есть две таблицы Quests(id, name, cost) и Users(id, name, balance, quests);
* functions.php - содержит методы для вывода всех пользователей и задач, информации по каждому отдельному пользователю или задаче, для добавления нового пользователя или новой задачи, метод, который обрабатывает выполнение задачи, для удаления задачи;
* index.php - основная страница, на которую приходят все запросы и обрабатывает их.

Папка v.ru состоит из двух файлов:
- index.html - страница на которую выводится вся информация;
- main.js - файл со скриптами для работы с API.

Для того, чтобы запустить использовал OpenServer с Apache сервером и локальной БД. Тестировал API с помощью Postman и в браузерах Google Chrome и Яндекс браузер.

GET-запросы:
* http://api.vk.ru/users - запрос для вывода всех пользователей;
* http://api.vk.ru/quests - запрос для вывода всех задач;
* http://api.vk.ru/user/id - запрос для вывода конкретного пользователя;
* http://api.vk.ru/quest/id - запрос для вывода конкретной задачи.

POST-запросы:
* http://api.vk.ru/user - запрос для добавления нового пользователя, передать нужно только name;
* http://api.vk.ru/quest - запрос для добавления новой задачи, передать нужно name и cost.

PATCH-запрос:
* http://api.vk.ru/user/id/quest/id - запрос для обработки выполнения задачи.

DELETE-запрос:
* http://api.vk.ru/quest/id - запрос для удаления конкретной задачи;
  
На frontend сверху выводятся все пользователя с возможностью выбора конкретного, только после выбора можно выполнить задачу (выводятся только задачи, которые можно выполнять, т.е. те, которые данный пользователь не выполнял), снизу две формы для добавления новой задачи и нового пользователя. После выбора конкретного пользователя, сверху останется только выбранный пользователь, под ним, доступные ему задачи, также будет выведен баланс и список выполненых задач, также можно вернуться обратно ко всему списку пользователей, чтобы выбрать другого. Удалять задачи можно только когда конкретный пользователь не выбран.

Для того, чтобы все работало нужна локальная БД с такими параметрами: (хост: 'localhost', имя пользователя: 'root', пароль: '', название БД: 'api_tasks') и двумя таблицами (есть sql-файл для быстрого создания БД), Apache-сервер (я пользовался OpenServer).
